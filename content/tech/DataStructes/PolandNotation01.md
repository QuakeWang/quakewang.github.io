---
title: "栈的应用——后缀表达式01"
date: 2020-07-15T08:31:49+08:00
draft: true
---

# 后缀表达式——预备知识

## 一、前言

在上一篇博客中，我们介绍了[中缀表达式](https://quakewang.github.io/tech/calculator/)的相关操作过程，虽然中缀表达式比较符合我们的日常使用习惯，但是对于计算机却不那么容易去理解，因此有了我们今天要介绍的——后缀表达式。

例如：( 3 +4 ) * 5 - 6 对应的后缀表达式就是3 4 + 5 * 6 -，那么这个操作过程是怎么实现的呢？？以及后缀表达式该如何进行运算呢？？在下面的内容，我们来一探究竟。

----

## 二、中缀表达式转后缀表达式

### 1、规则：

1）初始化一个运算符栈s1和一个用云储存中间结果的List s2；

2）从左到右扫描中缀表达式；

3）如果遇到操作数，直接加入到s2；

4）如果遇到运算符，则比较其与s1栈顶元素的优先级：

4.1）如果s1为空，或栈顶运算符为左括号"("，则直接将此运算符入栈；

4.2）若当前运算符比栈顶运算符的优先级高，也将此运算符入栈；

4.3）否则，将s1栈顶的运算符弹出并加入到s2中，然后再回到4.1）与s1中新的栈顶运算符相比较；

5）遇到括号时：

5.1）如果是左括号"("，则直接压入s1；

5.2）如果是右括号")"，则依次弹出s1栈顶的运算符，并加入s2，直到遇见左括号为止，此时将这一对括号丢弃；

6）重复上述步骤 2）至 5），直到表达式的最右边；

7）再将s1中剩余的运算符依次加入到s2；

8）依次输出s2中的元素，输出结果就是相对应的后缀表达式。

### 2、举例说明

将中缀表达式"1+((2+3)*4)-5"转换为后缀表达式的过程如下：

| 扫描到的元素 | s2（表头—>表尾）   | s1（栈底—>栈顶） | 说明                                     |
| ------------ | ------------------ | ---------------- | ---------------------------------------- |
| 1            | 1                  | 空               | 数字，直接加入到s2                       |
| +            | 1                  | +                | s1为空，运算符直接入栈                   |
| (            | 1                  | + (              | 左括号直接入栈                           |
| (            | 1                  | + ( (            | 左括号直接入栈                           |
| 2            | 1 2                | + ( (            | 数字，直接加入到s2                       |
| +            | 1 2                | + ( ( +          | s1栈顶为左括号，运算符直接入栈           |
| 3            | 1 2 3              | + ( ( +          | 数字，直接加入到s2                       |
| )            | 1 2 3 +            | + (              | 右括号，弹出s1中的运算符，直至遇到左括号 |
| *            | 1 2 3 +            | + ( *            | s1栈顶元素为左括号，运算符直接入栈       |
| 4            | 1 2 3 + 4          | + ( *            | 数字，直接加入到s2                       |
| )            | 1 2 3 + 4 *        | +                | 右括号，弹出s1中的运算符，直至遇到左括号 |
| -            | 1 2 3 + 4 * +      | -                | -与＋优先级相同，因此弹出+，再压入-      |
| 5            | 1 2 3 + 4 * + 5    | -                | 数字，直接加入到s2                       |
| 到达最右端   | 1 2 3 + 4 *  + 5 - | 空               | s1中剩余的运算符                         |

---

## 三、后缀表达式运算

后缀表达式的运算还是利用**栈**这种数据结构，这里我们利用"3 4 + 5 * 6 -"这个后缀表达式来进行说明：

### 1、规则：

>    从左到右遍历表达式的每个数字和字符，遇到是数字就进栈，遇到是运算符，就将处于栈顶两个数字（栈顶元素和次顶元素）出栈，进行运算，运算结果进栈，一直到最终获得结果。

## 2、具体操作：

1）从左至右扫描，将3和4压入栈；

2）遇到+运算符，依次弹出4和3（4为栈顶元素，3为次顶元素），并计算4 + 3的结果，得7，再将7入栈；

3）将5入栈；

4）接下来是*运算符，依次弹出5和7，计算出7 * 5 = 35，将35入栈；

5）将6入栈；

6）最后是-运算符，计算出35-6的值，即29，由此得出最终结果。

---

## 三、结束语

因为后缀表达式相对而言是比较复杂的，所以我们分两篇博客进行讲解，这里先介绍的是*如何将中缀表达式转换为后缀表达式*以及*后缀表达式的运算*。在下一篇博客中，将进行具体的代码说明。